if(console.log("INITED::enable-threads.js"),typeof window>"u"){async function T(g){if("only-if-cached"===g.cache&&"same-origin"!==g.mode)return;"no-cors"===g.mode&&(g=new Request(g.url,{cache:g.cache,credentials:"omit",headers:g.headers,integrity:g.integrity,destination:g.destination,keepalive:g.keepalive,method:g.method,mode:g.mode,redirect:g.redirect,referrer:g.referrer,referrerPolicy:g.referrerPolicy,signal:g.signal}));let p=await fetch(g).catch(r=>console.error(r));if(0===p.status)return p;const m=new Headers(p.headers);return m.set("Cross-Origin-Embedder-Policy","credentialless"),m.set("Cross-Origin-Opener-Policy","same-origin"),new Response(p.body,{status:p.status,statusText:p.statusText,headers:m})}self.addEventListener("install",()=>self.skipWaiting()),self.addEventListener("activate",g=>g.waitUntil(self.clients.claim())),self.addEventListener("fetch",function(g){g.respondWith(T(g.request))})}else!async function(){if(!1!==window.crossOriginIsolated)return;let T=await navigator.serviceWorker.register(window.document.currentScript.src).catch(g=>console.error("COOP/COEP Service Worker failed to register:",g));T&&(console.log("COOP/COEP Service Worker registered",T.scope),T.addEventListener("updatefound",()=>{console.log("Reloading page to make use of updated COOP/COEP Service Worker."),window.location.reload()}),T.active&&!navigator.serviceWorker.controller&&(console.log("Reloading page to make use of COOP/COEP Service Worker."),window.location.reload()))}();(function(T,g){"object"==typeof exports&&"object"==typeof module?module.exports=g():"function"==typeof define&&define.amd?define([],g):"object"==typeof exports?exports.FFmpeg=g():T.FFmpeg=g()})(self,function(){return T={497:(p,m,r)=>{var c=r(72),_=r(306).devDependencies;p.exports={corePath:typeof process<"u"&&"development"===process.env.FFMPEG_ENV?c("/node_modules/@ffmpeg/core/dist/ffmpeg-core.js"):"https://unpkg.com/@ffmpeg/core@".concat(_["@ffmpeg/core"].substring(1),"/dist/ffmpeg-core.js")}},663:(p,m,r)=>{function c(s,O,h,l,f,P,n){try{var j=s[P](n),v=j.value}catch(w){return void h(w)}j.done?O(v):Promise.resolve(v).then(l,f)}var s,O,_=r(72),d=function(s){return new Promise(function(O,h){var l=new FileReader;l.onload=function(){O(l.result)},l.onerror=function(f){h(Error("File could not be read! Code=".concat(f.target.error.code)))},l.readAsArrayBuffer(s)})};p.exports=(s=regeneratorRuntime.mark(function h(l){var f,P;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(f=l,void 0!==l){n.next=3;break}return n.abrupt("return",new Uint8Array);case 3:if("string"!=typeof l){n.next=16;break}if(!/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(l)){n.next=8;break}f=atob(l.split(",")[1]).split("").map(function(j){return j.charCodeAt(0)}),n.next=14;break;case 8:return n.next=10,fetch(_(l));case 10:return P=n.sent,n.next=13,P.arrayBuffer();case 13:f=n.sent;case 14:n.next=20;break;case 16:if(!(l instanceof File||l instanceof Blob)){n.next=20;break}return n.next=19,d(l);case 19:f=n.sent;case 20:return n.abrupt("return",new Uint8Array(f));case 21:case"end":return n.stop()}},h)}),O=function(){var h=this,l=arguments;return new Promise(function(f,P){var n=s.apply(h,l);function j(w){c(n,f,P,j,v,"next",w)}function v(w){c(n,f,P,j,v,"throw",w)}j(void 0)})},function(h){return O.apply(this,arguments)})},452:(p,m,r)=>{function c(h,l,f,P,n,j,v){try{var w=h[j](v),E=w.value}catch(k){return void f(k)}w.done?l(E):Promise.resolve(E).then(P,n)}function _(h){return function(){var l=this,f=arguments;return new Promise(function(P,n){var j=h.apply(l,f);function v(E){c(j,P,n,v,w,"next",E)}function w(E){c(j,P,n,v,w,"throw",E)}v(void 0)})}}var h,d=r(72),s=r(185).log,O=(h=_(regeneratorRuntime.mark(function l(f,P){var n,j,v;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return s("info","fetch ".concat(f)),w.next=3,fetch(f);case 3:return w.next=5,w.sent.arrayBuffer();case 5:return n=w.sent,s("info","".concat(f," file size = ").concat(n.byteLength," bytes")),j=new Blob([n],{type:P}),v=URL.createObjectURL(j),s("info","".concat(f," blob URL = ").concat(v)),w.abrupt("return",v);case 11:case"end":return w.stop()}},l)})),function(l,f){return h.apply(this,arguments)});p.exports=function(){var h=_(regeneratorRuntime.mark(function l(f){var P,n,j,v,w;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if("string"==typeof(P=f.corePath)){E.next=3;break}throw Error("corePath should be a string!");case 3:return n=d(P),E.next=6,O(n,"application/javascript");case 6:return j=E.sent,E.next=9,O(n.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm");case 9:return v=E.sent,E.next=12,O(n.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");case 12:if(w=E.sent,typeof createFFmpegCore<"u"){E.next=15;break}return E.abrupt("return",new Promise(function(k){var U=document.createElement("script");U.src=j,U.type="text/javascript",U.addEventListener("load",function z(){U.removeEventListener("load",z),s("info","ffmpeg-core.js script loaded"),k({createFFmpegCore,corePath:j,wasmPath:v,workerPath:w})}),document.getElementsByTagName("head")[0].appendChild(U)}));case 15:return s("info","ffmpeg-core.js script is loaded already"),E.abrupt("return",Promise.resolve({createFFmpegCore,corePath:j,wasmPath:v,workerPath:w}));case 17:case"end":return E.stop()}},l)}));return function(l){return h.apply(this,arguments)}}()},698:(p,m,r)=>{var c=r(497),_=r(452),d=r(663);p.exports={defaultOptions:c,getCreateFFmpegCore:_,fetchFile:d}},500:p=>{p.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:function(){},progress:function(){},corePath:""}}},906:(p,m,r)=>{function c(y){return function(i){if(Array.isArray(i))return _(i)}(y)||function(i){if(typeof Symbol<"u"&&Symbol.iterator in Object(i))return Array.from(i)}(y)||function(i,b){if(i){if("string"==typeof i)return _(i,b);var x=Object.prototype.toString.call(i).slice(8,-1);return"Object"===x&&i.constructor&&(x=i.constructor.name),"Map"===x||"Set"===x?Array.from(i):"Arguments"===x||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?_(i,b):void 0}}(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(y,i){(null==i||i>y.length)&&(i=y.length);for(var b=0,x=new Array(i);b<i;b++)x[b]=y[b];return x}function d(y,i,b,x,N,D,L){try{var B=y[D](L),t=B.value}catch(e){return void b(e)}B.done?i(t):Promise.resolve(t).then(x,N)}function O(y,i){var b=Object.keys(y);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(y);i&&(x=x.filter(function(N){return Object.getOwnPropertyDescriptor(y,N).enumerable})),b.push.apply(b,x)}return b}function h(y){for(var i=1;i<arguments.length;i++){var b=null!=arguments[i]?arguments[i]:{};i%2?O(Object(b),!0).forEach(function(x){l(y,x,b[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(b)):O(Object(b)).forEach(function(x){Object.defineProperty(y,x,Object.getOwnPropertyDescriptor(b,x))})}return y}function l(y,i,b){return i in y?Object.defineProperty(y,i,{value:b,enumerable:!0,configurable:!0,writable:!0}):y[i]=b,y}var P=r(500),n=P.defaultArgs,j=P.baseOptions,v=r(185),w=v.setLogging,E=v.setCustomLogger,k=v.log,U=r(583),z=r(319),$=r(698),ee=$.defaultOptions,te=$.getCreateFFmpegCore,q=r(306).version,J=Error("ffmpeg.wasm is not ready, make sure you have completed load().");p.exports=function(){var C,y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=h(h(h({},j),ee),y),b=i.log,x=i.logger,N=i.progress,D=function f(y,i){if(null==y)return{};var b,x,N=function(L,B){if(null==L)return{};var t,e,o={},u=Object.keys(L);for(e=0;e<u.length;e++)B.indexOf(t=u[e])>=0||(o[t]=L[t]);return o}(y,i);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(y);for(x=0;x<D.length;x++)i.indexOf(b=D[x])>=0||Object.prototype.propertyIsEnumerable.call(y,b)&&(N[b]=y[b])}return N}(i,["log","logger","progress"]),L=null,B=null,t=null,e=!1,o=N,a=function(C){var S=C.message;k(C.type,S),U(S,o),function(C){"FFMPEG_END"===C&&null!==t&&(t(),t=null,e=!1)}(S)},A=(C=function s(y){return function(){var i=this,b=arguments;return new Promise(function(x,N){var D=y.apply(i,b);function L(t){d(D,x,N,L,B,"next",t)}function B(t){d(D,x,N,L,B,"throw",t)}L(void 0)})}}(regeneratorRuntime.mark(function G(){var S,I,Q,Z,K;return regeneratorRuntime.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(k("info","load ffmpeg-core"),null!==L){V.next=17;break}return k("info","loading ffmpeg-core"),V.next=5,te(D);case 5:return I=(S=V.sent).createFFmpegCore,Q=S.corePath,Z=S.workerPath,K=S.wasmPath,V.next=12,I({mainScriptUrlOrBlob:Q,printErr:function(X){return a({type:"fferr",message:X})},print:function(X){return a({type:"ffout",message:X})},locateFile:function(X,re){if(typeof window<"u"){if(void 0!==K&&X.endsWith("ffmpeg-core.wasm"))return K;if(void 0!==Z&&X.endsWith("ffmpeg-core.worker.js"))return Z}return re+X}});case 12:B=(L=V.sent).cwrap("proxy_main","number",["number","number"]),k("info","ffmpeg-core loaded"),V.next=18;break;case 17:throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");case 18:case"end":return V.stop()}},G)})),function(){return C.apply(this,arguments)});return w(b),E(x),k("info","use ffmpeg.wasm v".concat(q)),{setProgress:function(C){o=C},setLogger:function(C){E(C)},setLogging:w,load:A,isLoaded:function(){return null!==L},run:function(){for(var C=arguments.length,G=new Array(C),S=0;S<C;S++)G[S]=arguments[S];if(k("info","run ffmpeg command: ".concat(G.join(" "))),null===L)throw J;if(e)throw Error("ffmpeg.wasm can only run one command at a time");return e=!0,new Promise(function(I){var Q=[].concat(c(n),G).filter(function(Z){return 0!==Z.length});t=I,B.apply(void 0,c(z(L,Q)))})},exit:function(){if(null===L)throw J;e=!1,L.exit(1),L=null,B=null,t=null},FS:function(C){for(var G=arguments.length,S=new Array(G>1?G-1:0),I=1;I<G;I++)S[I-1]=arguments[I];if(k("info","run FS.".concat(C," ").concat(S.map(function(K){return"string"==typeof K?K:"<".concat(K.length," bytes binary file>")}).join(" "))),null===L)throw J;var Q=null;try{var Z;Q=(Z=L.FS)[C].apply(Z,S)}catch{throw Error("readdir"===C?"ffmpeg.FS('readdir', '".concat(S[0],"') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')"):"readFile"===C?"ffmpeg.FS('readFile', '".concat(S[0],"') error. Check if the path exists"):"Oops, something went wrong in FS operation.")}return Q}}}},352:(p,m,r)=>{r(666);var c=r(906),_=r(698).fetchFile;p.exports={createFFmpeg:c,fetchFile:_}},185:p=>{var m=!1,r=function(){};p.exports={logging:m,setLogging:function(c){m=c},setCustomLogger:function(c){r=c},log:function(c,_){r({type:c,message:_}),m&&console.log("[".concat(c,"] ").concat(_))}}},319:p=>{p.exports=function(m,r){var c=m._malloc(r.length*Uint32Array.BYTES_PER_ELEMENT);return r.forEach(function(_,d){var s=m._malloc(_.length+1);m.writeAsciiToMemory(_,s),m.setValue(c+Uint32Array.BYTES_PER_ELEMENT*d,s,"i32")}),[r.length,c]}},583:p=>{function m(d,s){(null==s||s>d.length)&&(s=d.length);for(var O=0,h=new Array(s);O<s;O++)h[O]=d[O];return h}var r=0,c=0,_=function(d){var s,h=function(n){if(Array.isArray(n))return n}(s=d.split(":"))||function(n,j){if(typeof Symbol<"u"&&Symbol.iterator in Object(n)){var v=[],w=!0,E=!1,k=void 0;try{for(var U,z=n[Symbol.iterator]();!(w=(U=z.next()).done)&&(v.push(U.value),3!==v.length);w=!0);}catch($){E=!0,k=$}finally{try{w||null==z.return||z.return()}finally{if(E)throw k}}return v}}(s)||function(n,j){if(n){if("string"==typeof n)return m(n,3);var v=Object.prototype.toString.call(n).slice(8,-1);return"Object"===v&&n.constructor&&(v=n.constructor.name),"Map"===v||"Set"===v?Array.from(n):"Arguments"===v||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?m(n,3):void 0}}(s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),f=h[1],P=h[2];return 60*parseFloat(h[0])*60+60*parseFloat(f)+parseFloat(P)};p.exports=function(d,s){if("string"==typeof d)if(d.startsWith("  Duration")){var O=d.split(", ")[0].split(": ")[1],h=_(O);s({duration:h,ratio:c}),(0===r||r>h)&&(r=h)}else if(d.startsWith("frame")||d.startsWith("size")){var l=d.split("time=")[1].split(" ")[0],f=_(l);s({ratio:c=f/r,time:f})}else d.startsWith("video:")&&(s({ratio:1}),r=0)}},666:p=>{var m=function(r){"use strict";var c,_=Object.prototype,d=_.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},O=s.iterator||"@@iterator",h=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(t,e,o){return Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch{f=function(e,o,u){return e[o]=u}}function P(t,e,o,u){var M,H,F,W,A=Object.create((e&&e.prototype instanceof U?e:U).prototype),R=new D(u||[]);return A._invoke=(M=t,H=o,F=R,W=j,function(Y,C){if(W===w)throw new Error("Generator is already running");if(W===E){if("throw"===Y)throw C;return B()}for(F.method=Y,F.arg=C;;){var G=F.delegate;if(G){var S=b(G,F);if(S){if(S===k)continue;return S}}if("next"===F.method)F.sent=F._sent=F.arg;else if("throw"===F.method){if(W===j)throw W=E,F.arg;F.dispatchException(F.arg)}else"return"===F.method&&F.abrupt("return",F.arg);W=w;var I=n(M,H,F);if("normal"===I.type){if(W=F.done?E:v,I.arg===k)continue;return{value:I.arg,done:F.done}}"throw"===I.type&&(W=E,F.method="throw",F.arg=I.arg)}}),A}function n(t,e,o){try{return{type:"normal",arg:t.call(e,o)}}catch(u){return{type:"throw",arg:u}}}r.wrap=P;var j="suspendedStart",v="suspendedYield",w="executing",E="completed",k={};function U(){}function z(){}function $(){}var ee={};ee[O]=function(){return this};var te=Object.getPrototypeOf,q=te&&te(te(L([])));q&&q!==_&&d.call(q,O)&&(ee=q);var J=$.prototype=U.prototype=Object.create(ee);function y(t){["next","throw","return"].forEach(function(e){f(t,e,function(o){return this._invoke(e,o)})})}function i(t,e){function o(a,A,R,M){var H=n(t[a],t,A);if("throw"!==H.type){var F=H.arg,W=F.value;return W&&"object"==typeof W&&d.call(W,"__await")?e.resolve(W.__await).then(function(Y){o("next",Y,R,M)},function(Y){o("throw",Y,R,M)}):e.resolve(W).then(function(Y){F.value=Y,R(F)},function(Y){return o("throw",Y,R,M)})}M(H.arg)}var u;this._invoke=function(a,A){function R(){return new e(function(M,H){o(a,A,M,H)})}return u=u?u.then(R,R):R()}}function b(t,e){var o=t.iterator[e.method];if(o===c){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=c,b(t,e),"throw"===e.method))return k;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return k}var u=n(o,t.iterator,e.arg);if("throw"===u.type)return e.method="throw",e.arg=u.arg,e.delegate=null,k;var a=u.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=c),e.delegate=null,k):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,k)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function L(t){if(t){var e=t[O];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,u=function a(){for(;++o<t.length;)if(d.call(t,o))return a.value=t[o],a.done=!1,a;return a.value=c,a.done=!0,a};return u.next=u}}return{next:B}}function B(){return{value:c,done:!0}}return z.prototype=J.constructor=$,$.constructor=z,z.displayName=f($,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===z||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,$):(t.__proto__=$,f(t,l,"GeneratorFunction")),t.prototype=Object.create(J),t},r.awrap=function(t){return{__await:t}},y(i.prototype),i.prototype[h]=function(){return this},r.AsyncIterator=i,r.async=function(t,e,o,u,a){void 0===a&&(a=Promise);var A=new i(P(t,e,o,u),a);return r.isGeneratorFunction(e)?A:A.next().then(function(R){return R.done?R.value:A.next()})},y(J),f(J,l,"Generator"),J[O]=function(){return this},J.toString=function(){return"[object Generator]"},r.keys=function(t){var e=[];for(var o in t)e.push(o);return e.reverse(),function u(){for(;e.length;){var a=e.pop();if(a in t)return u.value=a,u.done=!1,u}return u.done=!0,u}},r.values=L,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(N),!t)for(var e in this)"t"===e.charAt(0)&&d.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(H,F){return A.type="throw",A.arg=t,e.next=H,F&&(e.method="next",e.arg=c),!!F}for(var u=this.tryEntries.length-1;u>=0;--u){var a=this.tryEntries[u],A=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var R=d.call(a,"catchLoc"),M=d.call(a,"finallyLoc");if(R&&M){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(R){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!M)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o];if(u.tryLoc<=this.prev&&d.call(u,"finallyLoc")&&this.prev<u.finallyLoc){var a=u;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var A=a?a.completion:{};return A.type=t,A.arg=e,a?(this.method="next",this.next=a.finallyLoc,k):this.complete(A)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),k},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),N(o),k}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc===t){var u=o.completion;if("throw"===u.type){var a=u.arg;N(o)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:L(t),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=c),k}},r}(p.exports);try{regeneratorRuntime=m}catch{Function("r","regeneratorRuntime = r")(m)}},72:function(p,m,r){var c,_;void 0===(_="function"==typeof(c=function(){return function(){var d=arguments.length;if(0===d)throw new Error("resolveUrl requires at least one argument; got none.");var s=document.createElement("base");if(s.href=arguments[0],1===d)return s.href;var O=document.getElementsByTagName("head")[0];O.insertBefore(s,O.firstChild);for(var h,l=document.createElement("a"),f=1;f<d;f++)l.href=arguments[f],s.href=h=l.href;return O.removeChild(s),h}})?c.call(m,r,m,p):c)||(p.exports=_)},306:p=>{"use strict";p.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.10.0","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"}}')}},g={},function p(m){if(g[m])return g[m].exports;var r=g[m]={exports:{}};return T[m].call(r.exports,r,r.exports,p),r.exports}(352);var T,g}),self.crossOriginIsolated?console.log("ffmpeg::Ready!"):console.log("COOP/COEP Error! Execution blocked.");const{createFFmpeg,fetchFile}=FFmpeg,ffmpeg=createFFmpeg({log:!1,corePath:"./ffmpeg/ffmpeg-core.js",progress:({ratio:T})=>{message.innerHTML=`Complete: ${(100*T).toFixed(2)}%`}}),defaults={bin:"ffmpeg",global:"-hide_banner",file:"-re -i {input}",http:"-fflags nobuffer -flags low_delay -i {input}",rtsp:"-fflags nobuffer -flags low_delay -timeout 5000000 -user_agent go2rtc/ffmpeg -rtsp_flags prefer_tcp -i {input}","rtsp/udp":"-fflags nobuffer -flags low_delay -timeout 5000000 -user_agent go2rtc/ffmpeg -i {input}",output:"-user_agent ffmpeg/go2rtc -rtsp_transport tcp -f rtsp {output}","output/mjpeg":"-f mjpeg -",h264:"-c:v libx264 -g 50 -profile:v high -level:v 4.1 -preset:v superfast -tune:v zerolatency -pix_fmt:v yuv420p",h265:"-c:v libx265 -g 50 -profile:v main -level:v 5.1 -preset:v superfast -tune:v zerolatency",mjpeg:"-c:v mjpeg",opus:"-c:a libopus -application:a lowdelay -frame_duration 20 -min_comp 0",pcmu:"-c:a pcm_mulaw -ar:a 8000 -ac:a 1","pcmu/16000":"-c:a pcm_mulaw -ar:a 16000 -ac:a 1","pcmu/48000":"-c:a pcm_mulaw -ar:a 48000 -ac:a 1",pcma:"-c:a pcm_alaw -ar:a 8000 -ac:a 1","pcma/16000":"-c:a pcm_alaw -ar:a 16000 -ac:a 1","pcma/48000":"-c:a pcm_alaw -ar:a 48000 -ac:a 1",aac:"-c:a aac","aac/16000":"-c:a aac -ar:a 16000 -ac:a 1",mp3:"-c:a libmp3lame -q:a 8",pcm:"-c:a pcm_s16be -ar:a 8000 -ac:a 1","pcm/16000":"-c:a pcm_s16be -ar:a 16000 -ac:a 1","pcm/48000":"-c:a pcm_s16be -ar:a 48000 -ac:a 1",pcml:"-c:a pcm_s16le -ar:a 8000 -ac:a 1","pcml/44100":"-c:a pcm_s16le -ar:a 44100 -ac:a 1","h264/vaapi":"-c:v h264_vaapi -g 50 -bf 0 -profile:v high -level:v 4.1 -sei:v 0","h265/vaapi":"-c:v hevc_vaapi -g 50 -bf 0 -profile:v high -level:v 5.1 -sei:v 0","mjpeg/vaapi":"-c:v mjpeg_vaapi","h264/v4l2m2m":"-c:v h264_v4l2m2m -g 50 -bf 0","h265/v4l2m2m":"-c:v hevc_v4l2m2m -g 50 -bf 0","h264/cuda":"-c:v h264_nvenc -g 50 -bf 0 -profile:v high -level:v auto -preset:v p2 -tune:v ll","h265/cuda":"-c:v hevc_nvenc -g 50 -bf 0 -profile:v high -level:v auto","h264/dxva2":"-c:v h264_qsv -g 50 -bf 0 -profile:v high -level:v 4.1 -async_depth:v 1","h265/dxva2":"-c:v hevc_qsv -g 50 -bf 0 -profile:v high -level:v 5.1 -async_depth:v 1","mjpeg/dxva2":"-c:v mjpeg_qsv -profile:v high -level:v 5.1","h264/videotoolbox":"-c:v h264_videotoolbox -g 50 -bf 0 -profile:v high -level:v 4.1","h265/videotoolbox":"-c:v hevc_videotoolbox -g 50 -bf 0 -profile:v high -level:v 5.1"},transcode=async(T,g,p)=>{try{ffmpeg.isLoaded()||await ffmpeg.load(),console.log("Start transcoding"),ffmpeg.FS("writeFile","segment.pcap",await fetchFile(T));const m=["-f",g||"g722"];"g722"!=g&&m.push("-ar","8000"),m.push("-i","segment.pcap","-id3v2_version","3",p),await ffmpeg.run(...m),console.log("Complete transcoding");const c=ffmpeg.FS("readFile",p);return URL.createObjectURL(new Blob([c.buffer],{type:"audio/mpeg"}))}catch(m){console.log(m)}};